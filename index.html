<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>90-Day Launch Dashboard + Content Scheduler</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json,{%22name%22:%2290-Day%20Launch%20Dashboard%22,%22short_name%22:%22Launch%20Hub%22,%22description%22:%22Your%2090-day%20business%20launch%20tracking%20dashboard%22,%22start_url%22:%22/%22,%22display%22:%22standalone%22,%22background_color%22:%22%23667eea%22,%22theme_color%22:%22%234f46e5%22,%22icons%22:[{%22src%22:%22data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjI0MCIgdmlld0JveD0iMCAwIDI0MCAyNDAiIGZpbGw9IiM0ZjQ2ZTUiPgo8Y2lyY2xlIGN4PSIxMjAiIGN5PSIxMjAiIHI9IjEwMCIvPgo8dGV4dCB4PSIxMjAiIHk9IjEzNSIgZm9udC1zaXplPSI0OCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfmoE8L3RleHQ+Cjwvc3ZnPg==%22,%22sizes%22:%22240x240%22,%22type%22:%22image/svg+xml%22}]}">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#4f46e5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Launch Hub">
    
    <!-- Google Calendar API -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
            min-height: calc(100vh - 20px);
        }

        .header {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            padding: 25px 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .tabs {
            display: flex;
            background: #f8fafc;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            padding: 15px 16px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            white-space: nowrap;
            min-width: 100px;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .tab.active {
            background: white;
            border-bottom-color: #4f46e5;
            color: #4f46e5;
        }

        .tab:hover {
            background: #e2e8f0;
        }

        .tab-content {
            display: none;
            padding: 20px;
            min-height: 400px;
        }

        .tab-content.active {
            display: block;
        }

        /* Progress Styles */
        .progress-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .progress-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .progress-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .progress-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: conic-gradient(#4f46e5 0deg, #e2e8f0 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            position: relative;
            transition: all 0.5s ease;
        }

        .progress-circle::before {
            content: '';
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: white;
            position: absolute;
        }

        .progress-text {
            position: relative;
            z-index: 1;
            font-weight: 700;
            color: #1e293b;
            font-size: 0.9rem;
        }

        .progress-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
        }

        /* Calendar Styles */
        .calendar-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .calendar-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .calendar-subtitle {
            color: #64748b;
            margin-bottom: 20px;
        }

        .era-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }

        .era-card {
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.8rem;
        }

        .era-launch { background: #fef2f2; color: #dc2626; }
        .era-buildout { background: #fffbeb; color: #d97706; }
        .era-marketing { background: #ecfdf5; color: #059669; }
        .era-maintenance { background: #f3e8ff; color: #7c3aed; }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            margin-bottom: 20px;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            color: #64748b;
            padding: 8px;
            font-size: 0.75rem;
        }

        .calendar-day {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 8px;
            min-height: 60px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
        }

        .calendar-day:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .calendar-day.launch { border-left: 4px solid #ef4444; background: #fef2f2; }
        .calendar-day.buildout { border-left: 4px solid #f59e0b; background: #fffbeb; }
        .calendar-day.marketing { border-left: 4px solid #10b981; background: #ecfdf5; }
        .calendar-day.maintenance { border-left: 4px solid #8b5cf6; background: #f3e8ff; }

        .day-number {
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 3px;
            font-size: 0.85rem;
        }

        .day-date {
            font-size: 0.65rem;
            color: #64748b;
        }

        .task-indicator {
            width: 6px;
            height: 6px;
            background: #10b981;
            border-radius: 50%;
            position: absolute;
            top: 4px;
            right: 4px;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .google-indicator {
            width: 6px;
            height: 6px;
            background: #ea4335;
            border-radius: 50%;
            position: absolute;
            top: 4px;
            left: 12px;
        }

        /* Task Styles */
        .task-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .task-item {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
        }

        .task-label {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
            font-size: 0.9rem;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: #e2e8f0;
        }

        .checkbox-item.completed {
            background: #dcfce7;
            border-color: #16a34a;
            color: #15803d;
        }

        .checkbox-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
            margin: 0;
            accent-color: #4f46e5;
        }

        .save-btn {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .save-btn:hover {
            background: #4338ca;
            transform: translateY(-1px);
        }

        /* Era Timeline Styles */
        #eraTimeline {
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        #eraProgress {
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 25px;
            max-width: 600px;
            margin: 30px auto;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 15px;
            margin-right: 40px;
        }

        .modal-era {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 20px;
        }

        .schedule-section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
        }

        .schedule-item {
            display: flex;
            margin-bottom: 8px;
            padding: 8px;
            background: #f8fafc;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .schedule-time {
            font-weight: 600;
            color: #4f46e5;
            min-width: 70px;
        }

        .streak-counter {
            background: #f0f9ff;
            border: 2px solid #0369a1;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
        }

        .streak-number {
            font-size: 2rem;
            font-weight: 700;
            color: #0369a1;
            margin-bottom: 5px;
        }

        .streak-text {
            color: #64748b;
            font-size: 0.85rem;
        }

        /* Content Scheduler Styles */
        .content-planning {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .planning-header {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .content-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            font-weight: 600;
            color: #374151;
            font-size: 0.85rem;
        }

        .form-input, .form-textarea, .form-select {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .platform-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .platform-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }

        .platform-option:hover {
            border-color: #4f46e5;
        }

        .platform-option.selected {
            border-color: #4f46e5;
            background: #f0f9ff;
        }

        .content-queue {
            margin-top: 25px;
        }

        .queue-item {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .queue-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }

        .queue-platforms {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .platform-tag {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .tag-instagram { background: #fce7f3; color: #be185d; }
        .tag-tiktok { background: #fef2f2; color: #dc2626; }
        .tag-youtube { background: #fef3c7; color: #d97706; }
        .tag-pinterest { background: #fef2f2; color: #dc2626; }
        .tag-facebook { background: #dbeafe; color: #1d4ed8; }
        .tag-twitter { background: #f0f9ff; color: #0369a1; }

        .save-indicator {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #10b981;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            font-size: 0.85rem;
        }

        .save-indicator.show {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .era-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            .calendar-grid {
                gap: 4px;
            }
            
            .calendar-day {
                min-height: 50px;
                padding: 6px;
            }
            
            .day-number {
                font-size: 0.75rem;
            }
            
            .day-date {
                font-size: 0.6rem;
            }
            
            .modal {
                padding: 10px;
            }
            
            .modal-content {
                margin: 20px auto;
                padding: 20px;
            }

            .progress-grid {
                grid-template-columns: 1fr;
            }

            .content-form {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 90-Day Launch Hub</h1>
            <div id="countdown">Launch begins August 25th, 2025</div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('overview')">📊 Overview</div>
            <div class="tab" onclick="showTab('calendar')">📅 Calendar</div>
            <div class="tab" onclick="showTab('content-hub')">📱 Content Hub</div>
            <div class="tab" onclick="showTab('business')">🏢 Business</div>
            <div class="tab" onclick="showTab('health')">💪 Health</div>
            <div class="tab" onclick="showTab('spanish')">🇪🇸 Spanish</div>
            <div class="tab" onclick="showTab('social')">📱 Social</div>
            <div class="tab" onclick="showTab('export')">📤 Export</div>
        </div>

        <!-- Overview Tab -->
        <div class="tab-content active" id="overview">
            <h3 style="text-align: center; margin-bottom: 20px; color: #1e293b;">Progress Overview</h3>
            
            <!-- Streak Counter -->
            <div class="streak-counter">
                <div class="streak-number" id="streakNumber">0</div>
                <div class="streak-text">Day Streak 🔥</div>
            </div>
            
            <!-- Era Progression Timeline -->
            <div style="margin-bottom: 30px; padding: 20px; background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%); border-radius: 12px; border-left: 4px solid #4f46e5;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div style="font-weight: 700; color: #1e293b; font-size: 1.1rem;">🎯 90-Day Journey Progress</div>
                    <div id="currentDayDisplay" style="font-weight: 600; color: #4f46e5;">Day 1 of 90</div>
                </div>
                
                <!-- Era Timeline -->
                <div id="eraTimeline" style="position: relative; height: 40px; background: #e2e8f0; border-radius: 20px; overflow: hidden; margin-bottom: 15px;">
                    <div id="eraProgress" style="height: 100%; background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #10b981 50%, #8b5cf6 75%); border-radius: 20px; width: 1.11%; transition: width 0.5s ease;"></div>
                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; align-items: center; justify-content: space-between; padding: 0 10px; font-size: 0.7rem; font-weight: 600; color: #64748b;">
                        <span>Launch</span>
                        <span>Build-Out</span>
                        <span>Marketing</span>
                        <span>Maintenance</span>
                    </div>
                </div>
                
                <!-- Current Era Info -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 0.85rem;">
                    <div style="text-align: center;">
                        <div style="color: #64748b;">Current Era</div>
                        <div id="currentEraName" style="font-weight: 700; color: #1e293b;">Launch Era</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: #64748b;">Era Progress</div>
                        <div id="eraProgressText" style="font-weight: 700; color: #1e293b;">Day 1 of 15</div>
                    </div>
                </div>
            </div>
            
            <div class="progress-grid">
                <div class="progress-card">
                    <div class="progress-title">🏢 Business</div>
                    <div class="progress-circle" data-progress="0" data-category="business">
                        <div class="progress-text">0%</div>
                    </div>
                    <div style="color: #64748b; font-size: 0.75rem; margin-top: 5px;" id="businessTaskCount">0/4 tasks</div>
                </div>
                <div class="progress-card">
                    <div class="progress-title">💪 Health</div>
                    <div class="progress-circle" data-progress="0" data-category="health">
                        <div class="progress-text">0%</div>
                    </div>
                    <div style="color: #64748b; font-size: 0.75rem; margin-top: 5px;" id="healthTaskCount">0/8 tasks</div>
                </div>
                <div class="progress-card">
                    <div class="progress-title">🇪🇸 Spanish</div>
                    <div class="progress-circle" data-progress="0" data-category="spanish">
                        <div class="progress-text">0%</div>
                    </div>
                    <div style="color: #64748b; font-size: 0.75rem; margin-top: 5px;" id="spanishTaskCount">0/12 tasks</div>
                </div>
                <div class="progress-card">
                    <div class="progress-title">📱 Social</div>
                    <div class="progress-circle" data-progress="0" data-category="social">
                        <div class="progress-text">0%</div>
                    </div>
                    <div style="color: #64748b; font-size: 0.75rem; margin-top: 5px;" id="socialTaskCount">0/8 tasks</div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                    <div style="background: white; border: 2px solid #e2e8f0; border-radius: 10px; padding: 15px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #4f46e5; margin-bottom: 5px;" id="totalTasks">0</div>
                        <div style="color: #64748b; font-size: 0.8rem;">Tasks Completed</div>
                    </div>
                    <div style="background: white; border: 2px solid #e2e8f0; border-radius: 10px; padding: 15px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #4f46e5; margin-bottom: 5px;" id="currentDay">1</div>
                        <div style="color: #64748b; font-size: 0.8rem;">Current Day</div>
                    </div>
                    <div style="background: white; border: 2px solid #e2e8f0; border-radius: 10px; padding: 15px; text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #4f46e5; margin-bottom: 5px;" id="daysLeft">90</div>
                        <div style="color: #64748b; font-size: 0.8rem;">Days Left</div>
                    </div>
                </div>
                
                <!-- Helpful tip about undoing tasks -->
                <div style="margin-top: 20px; padding: 15px; background: #f0f9ff; border: 2px solid #bae6fd; border-radius: 10px; text-align: left;">
                    <div style="font-weight: 600; color: #0369a1; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                        <span>💡</span>
                        <span>Pro Tip: Flexible Progress Tracking</span>
                    </div>
                    <div style="color: #0c4a6e; font-size: 0.85rem; line-height: 1.4;">
                        <strong>You can undo any task!</strong> Simply click any completed checkbox to uncheck it. All metrics update instantly:
                        <ul style="margin: 8px 0 0 20px; padding: 0;">
                            <li>✅ Progress circles recalculate automatically</li>
                            <li>📊 Era timeline adjusts in real-time</li>
                            <li>🔥 Streak counter updates</li>
                            <li>📈 All stats refresh immediately</li>
                            <li>📅 Calendar content syncs automatically</li>
                        </ul>
                        Perfect for fixing mistakes or adjusting your progress!
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Tab -->
        <div class="tab-content" id="calendar">
            <div class="calendar-header">
                <div class="calendar-title">📅 Interactive 90-Day Calendar</div>
                <div class="calendar-subtitle">Click any day to see detailed schedule & add custom tasks</div>
                
                <!-- Google Calendar Integration Panel -->
                <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
                        <div style="font-weight: 600; color: #1e293b;">📅 Google Calendar Integration</div>
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #64748b;" id="syncIndicator"></div>
                    </div>
                    <div style="color: #64748b; font-size: 0.85rem; margin-bottom: 15px;" id="syncStatus">
                        Ready to connect to Google Calendar
                    </div>
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="save-btn" id="connectBtn" onclick="connectGoogleCalendar()" style="background: #ea4335; padding: 8px 16px; font-size: 0.8rem;">
                            📅 Connect Google Calendar
                        </button>
                        <button class="save-btn" id="syncBtn" onclick="syncWithGoogleCalendar()" style="display: none; background: #10b981; padding: 8px 16px; font-size: 0.8rem;">
                            🔄 Sync Tasks to Google
                        </button>
                        <button class="save-btn" id="importBtn" onclick="importFromGoogleCalendar()" style="display: none; background: #059669; padding: 8px 16px; font-size: 0.8rem;">
                            ⬇️ Import from Google
                        </button>
                        <button class="save-btn" id="disconnectBtn" onclick="disconnectGoogleCalendar()" style="display: none; background: #64748b; padding: 8px 16px; font-size: 0.8rem;">
                            🔌 Disconnect
                        </button>
                    </div>
                    
                    <div style="margin-top: 10px; font-size: 0.75rem; color: #64748b;" id="lastSyncTime">
                        Never synced
                    </div>
                    
                    <!-- Sync Instructions -->
                    <div style="margin-top: 15px; padding: 10px; background: #f0f9ff; border-radius: 6px; border-left: 3px solid #4f46e5;">
                        <div style="font-weight: 600; color: #1e293b; font-size: 0.85rem; margin-bottom: 5px;">🔄 Bidirectional Sync:</div>
                        <div style="color: #64748b; font-size: 0.75rem; line-height: 1.3;">
                            • Tasks you complete here → Update Google Calendar<br>
                            • Events you add in Google Calendar → Show up here<br>
                            • Changes in either place sync automatically
                        </div>
                    </div>
                    
                    <!-- Setup Instructions -->
                    <div style="margin-top: 10px; padding: 10px; background: #fef3c7; border-radius: 6px; border-left: 3px solid #f59e0b;">
                        <div style="font-weight: 600; color: #92400e; font-size: 0.85rem; margin-bottom: 5px;">🛠️ Setup Required:</div>
                        <div style="color: #78350f; font-size: 0.75rem; line-height: 1.3;">
                            1. Get Google Calendar API credentials<br>
                            2. Replace GOOGLE_CLIENT_ID and GOOGLE_API_KEY in code<br>
                            3. Set authorized origin: https://myhub90.github.io<br>
                            <a href="#" onclick="showGoogleSetupGuide()" style="color: #f59e0b; text-decoration: underline;">📖 Detailed Setup Guide</a>
                        </div>
                    </div>
                </div>
                
                <div class="era-grid">
                    <div class="era-card era-launch">
                        <div style="font-weight: 700; margin-bottom: 3px;">Launch Era</div>
                        <div>Days 1-15</div>
                    </div>
                    <div class="era-card era-buildout">
                        <div style="font-weight: 700; margin-bottom: 3px;">Build-Out Era</div>
                        <div>Days 16-40</div>
                    </div>
                    <div class="era-card era-marketing">
                        <div style="font-weight: 700; margin-bottom: 3px;">Marketing Era</div>
                        <div>Days 41-60</div>
                    </div>
                    <div class="era-card era-maintenance">
                        <div style="font-weight: 700; margin-bottom: 3px;">Maintenance Era</div>
                        <div>Days 61-90</div>
                    </div>
                </div>
            </div>
            
            <div class="calendar-grid" id="calendarGrid">
                <!-- Calendar will be generated by JavaScript -->
            </div>
        </div>

        <!-- Content Hub Tab -->
        <div class="tab-content" id="content-hub">
            <h3 style="text-align: center; margin-bottom: 20px; color: #1e293b;">📱 Content Planning & Scheduling Hub</h3>
            
            <!-- Content Creation Form -->
            <div class="content-planning">
                <div class="planning-header">✨ Create New Content</div>
                
                <div class="content-form">
                    <div class="form-group">
                        <label class="form-label">Content Type</label>
                        <select class="form-select" id="contentType">
                            <option value="post">Social Media Post</option>
                            <option value="story">Story/Short</option>
                            <option value="video">Video Content</option>
                            <option value="carousel">Carousel/Gallery</option>
                            <option value="reels">Reels/TikTok</option>
                            <option value="blog">Blog Content</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Scheduled Date & Time</label>
                        <input type="datetime-local" class="form-input" id="scheduleDateTime">
                    </div>
                    
                    <div class="form-group full-width">
                        <label class="form-label">Content Caption/Description</label>
                        <textarea class="form-textarea" id="contentCaption" placeholder="Write your content caption here..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Hashtags</label>
                        <input type="text" class="form-input" id="contentHashtags" placeholder="#hashtag #hashtag">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Call to Action</label>
                        <input type="text" class="form-input" id="contentCTA" placeholder="Link in bio, comment below, etc.">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Select Platforms</label>
                    <div class="platform-selector">
                        <div class="platform-option" data-platform="instagram">
                            <input type="checkbox" id="platform-instagram">
                            <span>📸 Instagram</span>
                        </div>
                        <div class="platform-option" data-platform="tiktok">
                            <input type="checkbox" id="platform-tiktok">
                            <span>🎵 TikTok</span>
                        </div>
                        <div class="platform-option" data-platform="youtube">
                            <input type="checkbox" id="platform-youtube">
                            <span>📺 YouTube</span>
                        </div>
                        <div class="platform-option" data-platform="pinterest">
                            <input type="checkbox" id="platform-pinterest">
                            <span>📌 Pinterest</span>
                        </div>
                        <div class="platform-option" data-platform="facebook">
                            <input type="checkbox" id="platform-facebook">
                            <span>👥 Facebook</span>
                        </div>
                        <div class="platform-option" data-platform="twitter">
                            <input type="checkbox" id="platform-twitter">
                            <span>🐦 Twitter/X</span>
                        </div>
                    </div>
                </div>
                
                <button class="save-btn" style="width: 100%; padding: 12px;" onclick="scheduleContent()">
                    📅 Schedule Content
                </button>
            </div>
            
            <!-- Content Queue -->
            <div class="content-queue">
                <div class="planning-header">📋 Scheduled Content Queue</div>
                <div id="contentQueueList">
                    <div style="color: #64748b; font-style: italic; text-align: center; padding: 20px;">
                        No content scheduled yet. Create your first post above!
                    </div>
                </div>
            </div>

            <!-- Export Buttons -->
            <div style="margin-top: 25px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <button class="save-btn" onclick="exportToPlanoly()" style="background: #e91e63;">📌 Export to Planoly</button>
                <button class="save-btn" onclick="exportToBuffer()" style="background: #2196f3;">📊 Export to Buffer</button>
                <button class="save-btn" onclick="exportToLater()" style="background: #ff9800;">📱 Export to Later</button>
                <button class="save-btn" onclick="exportToCSV()" style="background: #4caf50;">📁 Download CSV</button>
            </div>
        </div>

        <!-- Business Tab -->
        <div class="tab-content" id="business">
            <div class="task-grid">
                <div class="task-item">
                    <div class="task-label">🏢 Daily Business Tasks</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="toggleTask(this, 'business')">
                            <input type="checkbox"> T-shirt design creation
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'business')">
                            <input type="checkbox"> Course module work
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'business')">
                            <input type="checkbox"> Pinterest content
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'business')">
                            <input type="checkbox"> Store/funnel setup
                        </div>
                    </div>
                </div>
            </div>
            <button class="save-btn" onclick="saveProgress('business')">💾 Save Business Progress</button>
        </div>

        <!-- Health Tab -->
        <div class="tab-content" id="health">
            <div class="task-grid">
                <div class="task-item">
                    <div class="task-label">💪 Daily Workouts</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="toggleTask(this, 'health')">
                            <input type="checkbox"> Morning workout (30 min)
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'health')">
                            <input type="checkbox"> Strength training
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'health')">
                            <input type="checkbox"> Cardio/HIIT
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'health')">
                            <input type="checkbox"> Yoga/stretching
                        </div>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-label">🍽️ Nutrition Plan</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="toggleTask(this, 'health')">
                            <input type="checkbox"> Healthy breakfast
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'health')">
                            <input type="checkbox"> Nutritious lunch
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'health')">
                            <input type="checkbox"> Balanced dinner
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'health')">
                            <input type="checkbox"> Proper hydration
                        </div>
                    </div>
                </div>
            </div>
            <button class="save-btn" onclick="saveProgress('health')">💾 Save Health Progress</button>
        </div>

        <!-- Spanish Tab -->
        <div class="tab-content" id="spanish">
            <div class="task-grid">
                <div class="task-item">
                    <div class="task-label">🇪🇸 Active Learning (1 hour goal)</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Grammar lessons
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Vocabulary practice
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Writing exercises
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Speaking practice
                        </div>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-label">📺 Passive Learning (1 hour goal)</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Spanish podcasts
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Spanish TV shows
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Spanish music
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Spanish YouTube
                        </div>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-label">💬 Conversation Practice (1 hour goal)</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Online conversation
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Language exchange
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Self-speaking practice
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'spanish')">
                            <input type="checkbox"> Voice recording
                        </div>
                    </div>
                </div>
            </div>
            <button class="save-btn" onclick="saveProgress('spanish')">💾 Save Spanish Progress</button>
        </div>

        <!-- Social Tab -->
        <div class="tab-content" id="social">
            <div class="task-grid">
                <div class="task-item">
                    <div class="task-label">📱 Platform Activity</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="toggleTask(this, 'social')">
                            <input type="checkbox"> Pinterest posts (5 pins)
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'social')">
                            <input type="checkbox"> Instagram story/post
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'social')">
                            <input type="checkbox"> TikTok video creation
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'social')">
                            <input type="checkbox"> YouTube planning
                        </div>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-label">📊 Engagement & Growth</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item" onclick="toggleTask(this, 'social')">
                            <input type="checkbox"> Respond to comments
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'social')">
                            <input type="checkbox"> Engage with others' content
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'social')">
                            <input type="checkbox"> Check analytics
                        </div>
                        <div class="checkbox-item" onclick="toggleTask(this, 'social')">
                            <input type="checkbox"> Plan tomorrow's content
                        </div>
                    </div>
                </div>
            </div>
            <button class="save-btn" onclick="saveProgress('social')">💾 Save Social Progress</button>
        </div>

        <!-- Export Tab -->
        <div class="tab-content" id="export">
            <h3 style="text-align: center; margin-bottom: 20px; color: #1e293b;">📤 Export & Integration Hub</h3>
            
            <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 10px; padding: 20px; margin-bottom: 20px;">
                <div style="font-weight: 600; color: #1e293b; margin-bottom: 15px; font-size: 1.1rem;">📋 Export to Notion</div>
                <div style="color: #64748b; margin-bottom: 15px;">
                    Generate a formatted progress report including calendar schedule and content plan.
                </div>
                <button class="save-btn" onclick="exportToNotion()">
                    📋 Generate Notion Export
                </button>
            </div>

            <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 10px; padding: 20px; margin-bottom: 20px;">
                <div style="font-weight: 600; color: #1e293b; margin-bottom: 15px; font-size: 1.1rem;">💾 Data Backup</div>
                <div style="color: #64748b; margin-bottom: 15px;">
                    Download complete backup including calendar data and content schedules.
                </div>
                <button class="save-btn" onclick="exportData()">
                    💾 Download Backup
                </button>
            </div>

            <div style="background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 10px; padding: 20px;">
                <div style="font-weight: 600; color: #1e293b; margin-bottom: 15px; font-size: 1.1rem;">📊 Progress Summary</div>
                <div id="progressSummary" style="color: #64748b;">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Day Detail Modal -->
    <div id="dayModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeDayModal()">×</button>
            <div class="modal-title" id="modalTitle">Day 1 - August 25th</div>
            <div class="modal-era era-launch" id="modalEra">Launch Era</div>
            <div id="modalContent">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeExportModal()">×</button>
            <div class="modal-title">📋 Export Data</div>
            <div style="margin-bottom: 15px; color: #64748b;">
                Copy this formatted text and paste it into your platform:
            </div>
            <textarea id="exportText" style="width: 100%; height: 400px; padding: 15px; border: 2px solid #e2e8f0; border-radius: 8px; font-family: monospace; font-size: 0.85rem;" readonly></textarea>
            <div style="margin-top: 15px; display: flex; gap: 10px;">
                <button class="save-btn" onclick="copyExportText()">📋 Copy to Clipboard</button>
                <button class="save-btn" onclick="closeExportModal()">Close</button>
            </div>
        </div>
    </div>

    <div class="save-indicator" id="saveIndicator">💾 Data Saved!</div>

    <script>
        // Data Storage Classes
        class AppData {
            constructor() {
                this.storage = JSON.parse(localStorage.getItem('launchDashboard') || '{}');
                this.contentQueue = JSON.parse(localStorage.getItem('contentQueue') || '[]');
                this.autoSaveInterval = null;
                this.startAutoSave();
            }

            getCurrentDate() {
                return new Date().toISOString().split('T')[0];
            }

            save(key, value) {
                try {
                    const today = this.getCurrentDate();
                    if (!this.storage[today]) {
                        this.storage[today] = {};
                    }
                    this.storage[today][key] = value;
                    this.storage[today]['lastUpdated'] = new Date().toISOString();
                    localStorage.setItem('launchDashboard', JSON.stringify(this.storage));
                    return true;
                } catch (e) {
                    console.error('Save failed:', e);
                    return false;
                }
            }

            load(key) {
                try {
                    const today = this.getCurrentDate();
                    return this.storage[today] ? this.storage[today][key] : null;
                } catch (e) {
                    return null;
                }
            }

            getAllData() {
                return {
                    storage: this.storage,
                    contentQueue: this.contentQueue
                };
            }

            addToContentQueue(content) {
                content.id = Date.now();
                content.status = 'scheduled';
                this.contentQueue.push(content);
                this.saveContentQueue();
                this.updateCalendarIndicators();
            }

            removeFromContentQueue(id) {
                this.contentQueue = this.contentQueue.filter(item => item.id !== id);
                this.saveContentQueue();
                this.updateCalendarIndicators();
            }

            saveContentQueue() {
                localStorage.setItem('contentQueue', JSON.stringify(this.contentQueue));
            }

            updateCalendarIndicators() {
                // Update calendar with content indicators
                generateCalendar();
            }

            startAutoSave() {
                this.autoSaveInterval = setInterval(() => {
                    try {
                        localStorage.setItem('launchDashboard', JSON.stringify(this.storage));
                        this.saveContentQueue();
                    } catch (e) {
                        console.error('Auto-save failed:', e);
                    }
                }, 30000);
            }

            showSaveIndicator(message = '💾 Data Saved!') {
                const indicator = document.getElementById('saveIndicator');
                if (indicator) {
                    indicator.textContent = message;
                    indicator.classList.add('show');
                    setTimeout(() => {
                        indicator.classList.remove('show');
                    }, 2000);
                }
            }
        }

        const appData = new AppData();

        // ⭐ GOOGLE CALENDAR CREDENTIALS - REPLACE THESE ⭐
        const GOOGLE_CLIENT_ID = '364585215787-867f9dat0qqqtdao8o46q2o04ubr247q.apps.googleusercontent.com';
        const GOOGLE_API_KEY = 'AIzaSyAsjG_01Da1ChmZDy4y0CiUgZBNlBuFDzk';

        // Google Calendar Integration Class
        class GoogleCalendarIntegration {
            constructor() {
                this.isSignedIn = false;
                this.gapi = null;
                this.auth2 = null;
                this.isInitialized = false;
                this.calendarId = 'primary';
                this.lastSyncTime = null;
            }

            async initialize() {
                try {
                    console.log('🔄 Initializing Google Calendar integration...');
                    
                    // Check if credentials are set
                    if (GOOGLE_CLIENT_ID === 'YOUR_GOOGLE_CLIENT_ID' || GOOGLE_API_KEY === 'YOUR_GOOGLE_API_KEY') {
                        this.updateSyncStatus('⚠️ Add your Google Calendar credentials to connect', 'error');
                        return false;
                    }

                    // Wait for Google API to load
                    await this.waitForGoogleAPI();

                    // Initialize the client
                    await gapi.client.init({
                        apiKey: AIzaSyAsjG_01Da1ChmZDy4y0CiUgZBNlBuFDzk,
                        clientId: 364585215787-867f9dat0qqqtdao8o46q2o04ubr247q.apps.googleusercontent.com,
                        discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest'],
                        scope: 'https://www.googleapis.com/auth/calendar'
                    });

                    this.gapi = gapi;
                    this.auth2 = gapi.auth2.getAuthInstance();

                    // Check if already signed in
                    if (this.auth2.isSignedIn.get()) {
                        this.isSignedIn = true;
                        this.updateSyncStatus('✅ Connected to Google Calendar', 'connected');
                        this.updateUIForConnectedState();
                    } else {
                        this.updateSyncStatus('✅ Ready to connect to Google Calendar', 'ready');
                    }

                    this.isInitialized = true;
                    console.log('✅ Google Calendar integration initialized');
                    return true;
                    
                } catch (error) {
                    console.error('Google Calendar initialization failed:', error);
                    this.updateSyncStatus(`❌ Setup failed: ${error.message}`, 'error');
                    return false;
                }
            }

            async waitForGoogleAPI() {
                return new Promise((resolve, reject) => {
                    let attempts = 0;
                    const maxAttempts = 20;
                    
                    const checkReady = () => {
                        attempts++;
                        
                        if (typeof gapi !== 'undefined' && gapi.load) {
                            gapi.load('client:auth2', resolve);
                        } else if (attempts < maxAttempts) {
                            console.log(`⏳ Waiting for Google API... (${attempts}/${maxAttempts})`);
                            setTimeout(checkReady, 250);
                        } else {
                            reject(new Error('Google API not ready after 5 seconds'));
                        }
                    };
                    
                    checkReady();
                });
            }

            async connect() {
                try {
                    if (!this.isInitialized) {
                        const initSuccess = await this.initialize();
                        if (!initSuccess) {
                            throw new Error('Failed to initialize Google Calendar API');
                        }
                    }

                    this.updateSyncStatus('🔄 Connecting to Google Calendar...', 'syncing');

                    const authInstance = this.auth2;
                    await authInstance.signIn();

                    if (authInstance.isSignedIn.get()) {
                        this.isSignedIn = true;
                        this.updateSyncStatus('✅ Connected to Google Calendar!', 'connected');
                        this.updateUIForConnectedState();
                        
                        // Test the connection
                        await this.testConnection();
                        appData.showSaveIndicator('🎉 Google Calendar connected!');
                        
                        console.log('✅ Google Calendar connected successfully');
                    } else {
                        throw new Error('Sign-in was not successful');
                    }

                } catch (error) {
                    console.error('Google Calendar connection failed:', error);
                    this.updateSyncStatus('❌ Connection failed - check permissions', 'error');
                    this.isSignedIn = false;
                    this.updateUIForDisconnectedState();
                }
            }

            async testConnection() {
                try {
                    const response = await gapi.client.calendar.events.list({
                        calendarId: this.calendarId,
                        maxResults: 1,
                        singleEvents: true,
                        orderBy: 'startTime'
                    });

                    console.log('✅ Google Calendar API test successful');
                    this.updateSyncStatus('✅ Connected & verified! Ready to sync.', 'connected');
                    return true;
                } catch (error) {
                    console.error('Google Calendar API test failed:', error);
                    this.updateSyncStatus('⚠️ Connected but API test failed. Check permissions.', 'error');
                    return false;
                }
            }

            async syncTasksToGoogle() {
                if (!this.isSignedIn) {
                    this.updateSyncStatus('❌ Not connected to Google Calendar', 'error');
                    return;
                }

                try {
                    this.updateSyncStatus('🔄 Syncing tasks to Google Calendar...', 'syncing');

                    // Get all custom tasks and completed daily tasks
                    const allEvents = [];
                    const startDate = new Date('2025-08-25');

                    // Add milestone events
                    const milestones = [
                        { day: 1, title: '🚀 Launch Day - Foundation Setup', description: '90-Day Journey Begins! Set up foundation tools & design first t-shirts' },
                        { day: 16, title: '🏗️ Build-Out Era Begins', description: 'Transition to intensive building phase' },
                        { day: 41, title: '📈 Marketing Era Begins', description: 'Focus shifts to marketing and promotion' },
                        { day: 61, title: '🔧 Maintenance Era Begins', description: 'Optimize and maintain systems' },
                        { day: 90, title: '🎉 Launch Complete!', description: '90-Day Journey Successfully Completed!' }
                    ];

                    for (const milestone of milestones) {
                        const eventDate = new Date(startDate);
                        eventDate.setDate(startDate.getDate() + milestone.day - 1);
                        eventDate.setHours(9, 0, 0, 0); // 9 AM

                        const event = {
                            summary: milestone.title,
                            description: milestone.description + '\n\nGenerated by 90-Day Launch Dashboard',
                            start: {
                                dateTime: eventDate.toISOString(),
                                timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
                            },
                            end: {
                                dateTime: new Date(eventDate.getTime() + 60 * 60000).toISOString(),
                                timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
                            },
                            colorId: milestone.day === 1 || milestone.day === 90 ? '11' : '1' // Special color for start/end
                        };

                        allEvents.push(event);
                    }

                    // Add custom tasks for each day
                    for (let day = 1; day <= 90; day++) {
                        const customTasks = JSON.parse(appData.load(`custom-tasks-day-${day}`) || '[]');
                        const eventDate = new Date(startDate);
                        eventDate.setDate(startDate.getDate() + day - 1);

                        customTasks.forEach(task => {
                            const [hours, minutes] = task.time.split(':');
                            const taskDate = new Date(eventDate);
                            taskDate.setHours(parseInt(hours), parseInt(minutes), 0, 0);

                            const event = {
                                summary: `🎯 ${task.text}`,
                                description: `Day ${day} - ${task.type.toUpperCase()} task\n\nGenerated by 90-Day Launch Dashboard`,
                                start: {
                                    dateTime: taskDate.toISOString(),
                                    timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
                                },
                                end: {
                                    dateTime: new Date(taskDate.getTime() + 30 * 60000).toISOString(),
                                    timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
                                },
                                colorId: this.getColorForTaskType(task.type)
                            };

                            allEvents.push(event);
                        });
                    }

                    // Create events in Google Calendar
                    let successCount = 0;
                    for (const event of allEvents) {
                        try {
                            await gapi.client.calendar.events.insert({
                                calendarId: this.calendarId,
                                resource: event
                            });
                            successCount++;
                        } catch (error) {
                            console.warn('Failed to create event:', event.summary, error);
                        }
                    }

                    this.lastSyncTime = new Date();
                    this.updateSyncStatus(`✅ Synced ${successCount} events to Google Calendar`, 'connected');
                    this.updateLastSyncTime();
                    appData.showSaveIndicator(`🎉 ${successCount} events synced to Google Calendar!`);

                } catch (error) {
                    console.error('Sync to Google Calendar failed:', error);
                    this.updateSyncStatus('❌ Sync failed - check permissions', 'error');
                    appData.showSaveIndicator('❌ Sync failed. Try again.');
                }
            }

            async importFromGoogleCalendar() {
                if (!this.isSignedIn) {
                    this.updateSyncStatus('❌ Not connected to Google Calendar', 'error');
                    return;
                }

                try {
                    this.updateSyncStatus('🔄 Importing from Google Calendar...', 'syncing');

                    const startDate = new Date('2025-08-25');
                    const endDate = new Date('2025-11-23'); // 90 days later

                    const response = await gapi.client.calendar.events.list({
                        calendarId: this.calendarId,
                        timeMin: startDate.toISOString(),
                        timeMax: endDate.toISOString(),
                        singleEvents: true,
                        orderBy: 'startTime'
                    });

                    const events = response.result.items || [];
                    let importCount = 0;

                    // Filter out events we created (to avoid duplicates)
                    const externalEvents = events.filter(event => 
                        !event.description?.includes('Generated by 90-Day Launch Dashboard')
                    );

                    for (const event of externalEvents) {
                        if (!event.start?.dateTime) continue; // Skip all-day events

                        const eventDate = new Date(event.start.dateTime);
                        const daysSinceStart = Math.floor((eventDate - startDate) / (1000 * 60 * 60 * 24));
                        const dayNumber = daysSinceStart + 1;

                        if (dayNumber >= 1 && dayNumber <= 90) {
                            // Add as custom task
                            const customTasks = JSON.parse(appData.load(`custom-tasks-day-${dayNumber}`) || '[]');
                            
                            const newTask = {
                                time: eventDate.toTimeString().slice(0, 5), // HH:MM format
                                type: 'personal',
                                text: `${event.summary} (from Google Calendar)`,
                                id: Date.now() + Math.random()
                            };

                            // Check if this task already exists
                            const taskExists = customTasks.some(task => 
                                task.text.includes(event.summary) && task.time === newTask.time
                            );

                            if (!taskExists) {
                                customTasks.push(newTask);
                                customTasks.sort((a, b) => a.time.localeCompare(b.time));
                                appData.save(`custom-tasks-day-${dayNumber}`, JSON.stringify(customTasks));
                                importCount++;
                            }
                        }
                    }

                    this.lastSyncTime = new Date();
                    this.updateSyncStatus(`✅ Imported ${importCount} events from Google Calendar`, 'connected');
                    this.updateLastSyncTime();
                    
                    // Refresh calendar display
                    generateCalendar();
                    
                    appData.showSaveIndicator(`⬇️ ${importCount} events imported from Google Calendar!`);

                } catch (error) {
                    console.error('Import from Google Calendar failed:', error);
                    this.updateSyncStatus('❌ Import failed - check permissions', 'error');
                    appData.showSaveIndicator('❌ Import failed. Try again.');
                }
            }

            getColorForTaskType(type) {
                const colors = {
                    'business': '1', // Blue
                    'health': '10', // Green
                    'spanish': '6', // Orange
                    'social': '9', // Purple
                    'personal': '7' // Cyan
                };
                return colors[type] || '1';
            }

            async disconnect() {
                try {
                    if (this.auth2 && this.isSignedIn) {
                        await this.auth2.signOut();
                    }
                    
                    this.isSignedIn = false;
                    this.lastSyncTime = null;
                    this.updateSyncStatus('🔌 Disconnected from Google Calendar', 'ready');
                    this.updateUIForDisconnectedState();
                    appData.showSaveIndicator('🔌 Disconnected from Google Calendar');
                } catch (error) {
                    console.error('Disconnect failed:', error);
                }
            }

            updateSyncStatus(message, state) {
                const statusElement = document.getElementById('syncStatus');
                const indicator = document.getElementById('syncIndicator');
                
                if (statusElement) {
                    statusElement.textContent = message;
                }
                
                if (indicator) {
                    const colors = {
                        'ready': '#64748b',
                        'connected': '#10b981',
                        'syncing': '#f59e0b',
                        'error': '#ef4444'
                    };
                    indicator.style.background = colors[state] || '#64748b';
                    
                    if (state === 'syncing') {
                        indicator.style.animation = 'spin 1s linear infinite';
                    } else if (state === 'connected') {
                        indicator.style.animation = 'pulse 2s infinite';
                    } else {
                        indicator.style.animation = 'none';
                    }
                }
            }

            updateUIForConnectedState() {
                const connectBtn = document.getElementById('connectBtn');
                const syncBtn = document.getElementById('syncBtn');
                const importBtn = document.getElementById('importBtn');
                const disconnectBtn = document.getElementById('disconnectBtn');
                
                if (connectBtn) connectBtn.style.display = 'none';
                if (syncBtn) syncBtn.style.display = 'inline-block';
                if (importBtn) importBtn.style.display = 'inline-block';
                if (disconnectBtn) disconnectBtn.style.display = 'inline-block';
            }

            updateUIForDisconnectedState() {
                const connectBtn = document.getElementById('connectBtn');
                const syncBtn = document.getElementById('syncBtn');
                const importBtn = document.getElementById('importBtn');
                const disconnectBtn = document.getElementById('disconnectBtn');
                
                if (connectBtn) connectBtn.style.display = 'inline-block';
                if (syncBtn) syncBtn.style.display = 'none';
                if (importBtn) importBtn.style.display = 'none';
                if (disconnectBtn) disconnectBtn.style.display = 'none';
            }

            updateLastSyncTime() {
                const lastSyncElement = document.getElementById('lastSyncTime');
                if (lastSyncElement && this.lastSyncTime) {
                    lastSyncElement.textContent = `Last sync: ${this.lastSyncTime.toLocaleTimeString()}`;
                }
            }
        }

        const googleCalendar = new GoogleCalendarIntegration();

        // Google Calendar Interface Functions
        async function connectGoogleCalendar() {
            await googleCalendar.connect();
        }

        async function syncWithGoogleCalendar() {
            await googleCalendar.syncTasksToGoogle();
        }

        async function importFromGoogleCalendar() {
            await googleCalendar.importFromGoogleCalendar();
        }

        async function disconnectGoogleCalendar() {
            await googleCalendar.disconnect();
        }

        // Google Setup Guide
        function showGoogleSetupGuide() {
            const setupGuide = `
**🛠️ Google Calendar API Setup Guide**

**Step 1: Google Cloud Console**
1. Go to: https://console.cloud.google.com
2. Create a new project or select existing one
3. Click "New Project" → Name it "Launch Dashboard" → Create

**Step 2: Enable Calendar API**
1. Go to "APIs & Services" → "Library"
2. Search for "Google Calendar API"
3. Click on it and press "Enable"

**Step 3: Create Credentials**
1. Go to "APIs & Services" → "Credentials"
2. Click "Create Credentials" → "API Key"
3. Copy the API Key (starts with AIza...)
4. Click "Create Credentials" → "OAuth client ID"
5. Choose "Web application"
6. Add Authorized JavaScript origins:
   - https://myhub90.github.io
7. Copy the Client ID (ends with googleusercontent.com)

**Step 4: Update Your Code**
1. Open your dashboard code in GitHub
2. Find these lines (around line 620):
   const GOOGLE_CLIENT_ID = 'YOUR_GOOGLE_CLIENT_ID';
   const GOOGLE_API_KEY = 'YOUR_GOOGLE_API_KEY';
3. Replace with your actual credentials:
   const GOOGLE_CLIENT_ID = 'your-client-id.googleusercontent.com';
   const GOOGLE_API_KEY = 'AIzaSyYour-actual-api-key';
4. Save and commit changes

**Step 5: Test Connection**
1. Wait 2-3 minutes for GitHub to update
2. Refresh your dashboard
3. Click "Connect Google Calendar"
4. Grant permissions when prompted
5. Test sync functionality

**Troubleshooting:**
• Make sure authorized origins exactly match: https://myhub90.github.io
• No www, no trailing slash, no extra paths
• Wait 5-10 minutes after making changes in Google Cloud Console
• Check browser console for detailed error messages

**Security Note:**
These credentials are safe to use in public code as they're restricted to your specific domain and only have calendar access.
            `;
            
            showExportModal(setupGuide);
        }

        // Calendar data with detailed schedules
        const calendarData = {
            1: {
                era: 'launch',
                date: 'August 25',
                goal: 'Set up foundation tools & design first t-shirts',
                schedule: [
                    { time: '6:00 AM', task: 'Workout: 30min strength training' },
                    { time: '7:00 AM', task: 'Shower & breakfast with kids' },
                    { time: '8:00 AM', task: 'Homeschool: Math & reading with kids' },
                    { time: '10:00 AM', task: 'BUSINESS: Set up Printify account' },
                    { time: '10:30 AM', task: 'BUSINESS: Create first 3 t-shirt designs' },
                    { time: '12:00 PM', task: 'Lunch & family time' },
                    { time: '1:00 PM', task: 'Spanish learning: 1 hr active practice' },
                    { time: '2:00 PM', task: 'BUSINESS: Upload designs to Printify' },
                    { time: '3:00 PM', task: 'Spanish: 1 hr passive (videos/podcasts)' },
                    { time: '4:00 PM', task: 'Kids activities & family time' },
                    { time: '6:00 PM', task: 'Dinner & family time' },
                    { time: '8:00 PM', task: 'Spanish: 1 hr conversation practice' },
                    { time: '9:00 PM', task: 'Plan tomorrow & wind down' }
                ],
                tools: ['Printify', 'Canva', 'Language Apps'],
                notes: 'Focus on simple, motivational designs. Test print quality.'
            }
        };

        // Tab Management
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');

            // Update progress summary when export tab is opened
            if (tabName === 'export') {
                updateProgressSummary();
            }
        }

        // Progress Management
        function updateProgressCircle(element, percentage) {
            const degrees = (percentage / 100) * 360;
            element.style.background = `conic-gradient(#4f46e5 ${degrees}deg, #e2e8f0 ${degrees}deg)`;
            element.querySelector('.progress-text').textContent = `${percentage}%`;
        }

        function calculateCategoryProgress(category) {
            const categorySection = document.getElementById(category);
            if (!categorySection) return 0;
            
            const completedTasks = categorySection.querySelectorAll('.checkbox-item.completed').length;
            const totalTasks = categorySection.querySelectorAll('.checkbox-item').length;
            
            return totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
        }

        function updateAllProgressCircles() {
            ['business', 'health', 'spanish', 'social'].forEach(category => {
                const progress = calculateCategoryProgress(category);
                const circle = document.querySelector(`[data-category="${category}"]`);
                if (circle) {
                    updateProgressCircle(circle, progress);
                    
                    const categorySection = document.getElementById(category);
                    if (categorySection) {
                        const completedTasks = categorySection.querySelectorAll('.checkbox-item.completed').length;
                        const totalTasks = categorySection.querySelectorAll('.checkbox-item').length;
                        const taskCountElement = document.getElementById(`${category}TaskCount`);
                        if (taskCountElement) {
                            taskCountElement.textContent = `${completedTasks}/${totalTasks} tasks`;
                        }
                    }
                }
                
                appData.save(`progress-${category}`, progress);
            });
        }

        function getCurrentDayNumber() {
            const startDate = new Date('2025-08-25');
            const currentDate = new Date();
            const daysPassed = Math.floor((currentDate - startDate) / (1000 * 60 * 60 * 24));
            return Math.max(1, Math.min(90, daysPassed + 1));
        }

        function getCurrentEra(dayNumber = null) {
            const day = dayNumber || getCurrentDayNumber();
            if (day <= 15) return { name: 'Launch', color: '#ef4444', days: '1-15' };
            if (day <= 40) return { name: 'Build-Out', color: '#f59e0b', days: '16-40' };
            if (day <= 60) return { name: 'Marketing', color: '#10b981', days: '41-60' };
            return { name: 'Maintenance', color: '#8b5cf6', days: '61-90' };
        }

        function updateEraProgress() {
            const currentDay = getCurrentDayNumber();
            const currentEra = getCurrentEra(currentDay);
            
            const currentDayDisplay = document.getElementById('currentDayDisplay');
            if (currentDayDisplay) {
                currentDayDisplay.textContent = `Day ${currentDay} of 90`;
            }
            
            const eraProgress = document.getElementById('eraProgress');
            const overallProgress = (currentDay / 90) * 100;
            if (eraProgress) {
                eraProgress.style.width = `${overallProgress}%`;
            }
            
            const currentEraName = document.getElementById('currentEraName');
            if (currentEraName) {
                currentEraName.textContent = `${currentEra.name} Era`;
                currentEraName.style.color = currentEra.color;
            }
            
            const eraProgressText = document.getElementById('eraProgressText');
            if (eraProgressText) {
                let eraDay, eraTotalDays;
                if (currentDay <= 15) {
                    eraDay = currentDay;
                    eraTotalDays = 15;
                } else if (currentDay <= 40) {
                    eraDay = currentDay - 15;
                    eraTotalDays = 25;
                } else if (currentDay <= 60) {
                    eraDay = currentDay - 40;
                    eraTotalDays = 20;
                } else {
                    eraDay = currentDay - 60;
                    eraTotalDays = 30;
                }
                eraProgressText.textContent = `Day ${eraDay} of ${eraTotalDays}`;
            }
            
            const currentDayElement = document.getElementById('currentDay');
            if (currentDayElement) {
                currentDayElement.textContent = currentDay;
            }
            
            const daysLeftElement = document.getElementById('daysLeft');
            if (daysLeftElement) {
                daysLeftElement.textContent = Math.max(0, 90 - currentDay + 1);
            }
        }

        // Streak Counter
        function updateStreakCounter() {
            const streak = calculateCurrentStreak();
            const streakElement = document.getElementById('streakNumber');
            if (streakElement) {
                streakElement.textContent = streak;
            }
        }

        function calculateCurrentStreak() {
            // Simplified streak calculation
            const today = new Date().toISOString().split('T')[0];
            const hasTasksToday = document.querySelectorAll('.checkbox-item.completed').length > 0;
            return hasTasksToday ? 1 : 0;
        }

        // Task Management - Bidirectional (can check AND uncheck)
        function toggleTask(element, category) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            if (!checkbox) return;
            
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                element.classList.add('completed');
            } else {
                element.classList.remove('completed');
            }
            
            const taskText = element.textContent.trim();
            const taskId = `${category}-${taskText.replace(/\s+/g, '-').toLowerCase()}`;
            
            appData.save(taskId, checkbox.checked);
            
            updateAllProgressCircles();
            updateEraProgress();
            updateStats();
            updateStreakCounter();
            
            const action = checkbox.checked ? 'completed' : 'unchecked';
            appData.showSaveIndicator(`✅ Task ${action}!`);
        }

        function saveProgress(category) {
            updateAllProgressCircles();
            updateEraProgress();
            updateStats();
            updateStreakCounter();
            appData.showSaveIndicator();
        }

        // Calendar Management
        function generateCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            if (!calendarGrid) return;
            
            // Clear existing calendar
            calendarGrid.innerHTML = '';
            
            const startDate = new Date(2025, 7, 25);
            
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-day-header';
                header.textContent = day;
                calendarGrid.appendChild(header);
            });

            for (let i = 0; i < 90; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                const dayNumber = i + 1;
                const dayData = calendarData[dayNumber] || getDefaultDayData(dayNumber, currentDate);
                
                dayElement.className = `calendar-day ${dayData.era}`;
                
                dayElement.innerHTML = `
                    <div class="day-number">Day ${dayNumber}</div>
                    <div class="day-date">${currentDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</div>
                `;
                
                // Add task indicator if there are custom tasks
                const customTasks = JSON.parse(appData.load(`custom-tasks-day-${dayNumber}`) || '[]');
                if (customTasks.length > 0) {
                    const indicator = document.createElement('div');
                    indicator.className = 'task-indicator';
                    dayElement.appendChild(indicator);
                }
                
                // Add content indicator if there's scheduled content
                const dayContent = appData.contentQueue.filter(item => {
                    const contentDate = new Date(item.dateTime);
                    return contentDate.toDateString() === currentDate.toDateString();
                });
                if (dayContent.length > 0) {
                    const indicator = document.createElement('div');
                    indicator.className = 'content-indicator';
                    dayElement.appendChild(indicator);
                }

                // Add Google Calendar indicator if connected and has events
                if (googleCalendar.isSignedIn) {
                    const indicator = document.createElement('div');
                    indicator.className = 'google-indicator';
                    dayElement.appendChild(indicator);
                }
                
                dayElement.addEventListener('click', () => openDayModal(dayNumber, dayData));
                calendarGrid.appendChild(dayElement);
            }
        }

        function getDefaultDayData(dayNumber, date) {
            let era = 'launch';
            if (dayNumber > 15 && dayNumber <= 40) era = 'buildout';
            else if (dayNumber > 40 && dayNumber <= 60) era = 'marketing';
            else if (dayNumber > 60) era = 'maintenance';
            
            return {
                era: era,
                date: date.toLocaleDateString('en-US', { month: 'long', day: 'numeric' }),
                goal: 'Continue daily routine & business building',
                schedule: [
                    { time: '6:00 AM', task: 'Morning workout' },
                    { time: '8:00 AM', task: 'Homeschool with kids' },
                    { time: '10:00 AM', task: 'Business deep work block' },
                    { time: '1:00 PM', task: 'Spanish learning (3 hours total)' },
                    { time: '4:00 PM', task: 'Family time & household tasks' },
                    { time: '8:00 PM', task: 'Evening Spanish practice' }
                ],
                tools: ['Daily Tools', 'Spanish Apps', 'Business Platforms'],
                notes: 'Maintain consistent daily rhythm'
            };
        }

        function openDayModal(dayNumber, dayData) {
            const modal = document.getElementById('dayModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalEra = document.getElementById('modalEra');
            const modalContent = document.getElementById('modalContent');
            
            if (!modal || !modalTitle || !modalEra || !modalContent) return;
            
            modalTitle.textContent = `Day ${dayNumber} - ${dayData.date}`;
            modalEra.textContent = `${getEraName(dayData.era)} Era`;
            modalEra.className = `modal-era era-${dayData.era}`;
            
            const customTasks = JSON.parse(appData.load(`custom-tasks-day-${dayNumber}`) || '[]');
            
            // Get scheduled content for this day
            const startDate = new Date(2025, 7, 24 + dayNumber);
            const dayContent = appData.contentQueue.filter(item => {
                const contentDate = new Date(item.dateTime);
                return contentDate.toDateString() === startDate.toDateString();
            });
            
            modalContent.innerHTML = `
                <div class="schedule-section">
                    <div class="section-title">🎯 Daily Goal</div>
                    <p style="color: #64748b; margin-bottom: 20px; line-height: 1.5;">${dayData.goal}</p>
                    
                    <div class="section-title">📅 Complete Schedule</div>
                    ${dayData.schedule.map(item => `
                        <div class="schedule-item">
                            <div class="schedule-time">${item.time}</div>
                            <div>${item.task}</div>
                        </div>
                    `).join('')}
                </div>
                
                ${customTasks.length > 0 ? `
                    <div class="schedule-section">
                        <div class="section-title">✅ Your Custom Tasks</div>
                        ${customTasks.map(task => `
                            <div class="schedule-item">
                                <div class="schedule-time">${task.time}</div>
                                <div>${task.text} (${task.type})</div>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
                
                ${dayContent.length > 0 ? `
                    <div class="schedule-section">
                        <div class="section-title">📱 Scheduled Content</div>
                        ${dayContent.map(content => `
                            <div class="schedule-item">
                                <div class="schedule-time">${new Date(content.dateTime).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                                <div>${content.type} - ${content.platforms.join(', ')}</div>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
                
                <div class="schedule-section">
                    <div class="section-title">➕ Add Custom Task</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <input type="time" id="customTaskTime" style="padding: 8px; border: 2px solid #e2e8f0; border-radius: 6px;">
                        <select id="customTaskType" style="padding: 8px; border: 2px solid #e2e8f0; border-radius: 6px;">
                            <option value="business">Business</option>
                            <option value="health">Health</option>
                            <option value="spanish">Spanish</option>
                            <option value="social">Social</option>
                            <option value="personal">Personal</option>
                        </select>
                    </div>
                    <input type="text" id="customTaskText" placeholder="Enter task description..." style="width: 100%; padding: 8px; border: 2px solid #e2e8f0; border-radius: 6px; margin-bottom: 10px;">
                    <button onclick="addCustomTask(${dayNumber})" class="save-btn">Add Custom Task</button>
                </div>
                
                <div style="background: #f0f9ff; padding: 15px; border-radius: 10px; margin: 20px 0;">
                    <div class="section-title" style="color: #0369a1; margin-bottom: 10px;">🛠️ Tools & Resources</div>
                    <div style="display: flex; flex-wrap: wrap; gap: 6px;">
                        ${dayData.tools.map(tool => `<span style="background: white; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; color: #0369a1; border: 1px solid #bae6fd;">${tool}</span>`).join('')}
                    </div>
                </div>
                
                ${dayData.notes ? `
                    <div class="schedule-section">
                        <div class="section-title">📝 Notes & Tips</div>
                        <p style="color: #64748b; font-style: italic; line-height: 1.4;">${dayData.notes}</p>
                    </div>
                ` : ''}
            `;
            
            modal.style.display = 'block';
        }

        function addCustomTask(dayNumber) {
            const timeInput = document.getElementById('customTaskTime');
            const typeSelect = document.getElementById('customTaskType');
            const textInput = document.getElementById('customTaskText');
            
            if (!timeInput.value || !textInput.value) {
                alert('Please fill in both time and task description');
                return;
            }
            
            const customTasks = JSON.parse(appData.load(`custom-tasks-day-${dayNumber}`) || '[]');
            
            const newTask = {
                time: timeInput.value,
                type: typeSelect.value,
                text: textInput.value,
                id: Date.now()
            };
            
            customTasks.push(newTask);
            customTasks.sort((a, b) => a.time.localeCompare(b.time));
            
            appData.save(`custom-tasks-day-${dayNumber}`, JSON.stringify(customTasks));
            
            // Refresh the modal content
            const dayData = calendarData[dayNumber] || getDefaultDayData(dayNumber, new Date(2025, 7, 24 + dayNumber));
            openDayModal(dayNumber, dayData);
            
            // Update calendar indicators
            generateCalendar();
            
            appData.showSaveIndicator('✅ Custom task added!');
        }

        function getEraName(era) {
            const names = {
                'launch': 'Launch',
                'buildout': 'Build-Out',
                'marketing': 'Marketing', 
                'maintenance': 'Maintenance'
            };
            return names[era] || 'Launch';
        }

        function closeDayModal() {
            const modal = document.getElementById('dayModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Content Scheduler Functions
        function scheduleContent() {
            const contentType = document.getElementById('contentType').value;
            const dateTime = document.getElementById('scheduleDateTime').value;
            const caption = document.getElementById('contentCaption').value;
            const hashtags = document.getElementById('contentHashtags').value;
            const cta = document.getElementById('contentCTA').value;

            if (!dateTime || !caption) {
                alert('Please fill in the date/time and caption fields.');
                return;
            }

            const selectedPlatforms = [];
            document.querySelectorAll('.platform-option input:checked').forEach(checkbox => {
                selectedPlatforms.push(checkbox.closest('.platform-option').dataset.platform);
            });

            if (selectedPlatforms.length === 0) {
                alert('Please select at least one platform.');
                return;
            }

            const content = {
                type: contentType,
                dateTime: dateTime,
                caption: caption,
                hashtags: hashtags,
                cta: cta,
                platforms: selectedPlatforms,
                createdAt: new Date().toISOString()
            };

            appData.addToContentQueue(content);
            updateContentQueue();

            // Clear form
            document.getElementById('contentCaption').value = '';
            document.getElementById('contentHashtags').value = '';
            document.getElementById('contentCTA').value = '';
            document.querySelectorAll('.platform-option input:checked').forEach(checkbox => {
                checkbox.checked = false;
                checkbox.closest('.platform-option').classList.remove('selected');
            });

            appData.showSaveIndicator('📅 Content scheduled!');
        }

        function updateContentQueue() {
            const queueList = document.getElementById('contentQueueList');
            if (!queueList) return;

            if (appData.contentQueue.length === 0) {
                queueList.innerHTML = `
                    <div style="color: #64748b; font-style: italic; text-align: center; padding: 20px;">
                        No content scheduled yet. Create your first post above!
                    </div>
                `;
                return;
            }

            const sortedQueue = appData.contentQueue.sort((a, b) => new Date(a.dateTime) - new Date(b.dateTime));
            
            queueList.innerHTML = sortedQueue.map(item => `
                <div class="queue-item">
                    <div class="queue-header">
                        <div>
                            <div style="font-weight: 600; color: #1e293b; margin-bottom: 5px;">
                                ${item.type.charAt(0).toUpperCase() + item.type.slice(1)} - ${new Date(item.dateTime).toLocaleDateString()} at ${new Date(item.dateTime).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                            </div>
                            <div class="queue-platforms">
                                ${item.platforms.map(platform => `
                                    <span class="platform-tag tag-${platform}">${platform}</span>
                                `).join('')}
                            </div>
                        </div>
                        <button onclick="removeContent(${item.id})" style="background: #ef4444; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Delete</button>
                    </div>
                    <div style="color: #374151; margin-bottom: 8px;">${item.caption}</div>
                    ${item.hashtags ? `<div style="color: #6366f1; font-size: 0.85rem;">${item.hashtags}</div>` : ''}
                    ${item.cta ? `<div style="color: #059669; font-size: 0.85rem; font-weight: 600;">CTA: ${item.cta}</div>` : ''}
                </div>
            `).join('');
        }

        function removeContent(id) {
            appData.removeFromContentQueue(id);
            updateContentQueue();
            appData.showSaveIndicator('🗑️ Content removed');
        }

        // Platform Selector
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.platform-option').forEach(option => {
                option.addEventListener('click', function() {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    checkbox.checked = !checkbox.checked;
                    this.classList.toggle('selected', checkbox.checked);
                });
            });
        });

        // Export Functions
        function exportToPlanoly() {
            const planolyCsv = appData.contentQueue
                .filter(item => item.platforms.includes('instagram') || item.platforms.includes('pinterest'))
                .map(item => ({
                    'Date': new Date(item.dateTime).toLocaleDateString(),
                    'Time': new Date(item.dateTime).toLocaleTimeString(),
                    'Platform': item.platforms.join(', '),
                    'Content Type': item.type,
                    'Caption': item.caption,
                    'Hashtags': item.hashtags,
                    'CTA': item.cta
                }));

            const exportText = formatForPlanoly(planolyCsv);
            showExportModal(exportText);
        }

        function formatForPlanoly(data) {
            if (data.length === 0) {
                return 'No Instagram or Pinterest content found to export.';
            }

            return `**Planoly Import Instructions:**
1. Copy the data below
2. Open Planoly → Content Calendar
3. Use bulk upload or manually add posts

**Content for Planoly:**
${data.map((item, index) => `
**Post ${index + 1}:**
Date: ${item.Date} at ${item.Time}
Platform: ${item.Platform}
Type: ${item['Content Type']}
Caption: ${item.Caption}
Hashtags: ${item.Hashtags}
CTA: ${item.CTA}
---`).join('\n')}`;
        }

        function exportToBuffer() {
            const bufferData = appData.contentQueue.map(item => ({
                'Text': item.caption,
                'Date': new Date(item.dateTime).toLocaleDateString(),
                'Time': new Date(item.dateTime).toLocaleTimeString(),
                'Profiles': item.platforms.join(';'),
                'Media': '',
                'Link': item.cta || ''
            }));

            const csv = convertToCSV(bufferData);
            downloadCSV(csv, 'buffer-export.csv');
            appData.showSaveIndicator('📊 Buffer CSV downloaded!');
        }

        function exportToLater() {
            const laterFormat = appData.contentQueue
                .filter(item => item.platforms.includes('instagram'))
                .map(item => `
**Instagram Post - ${new Date(item.dateTime).toLocaleDateString()}**
Time: ${new Date(item.dateTime).toLocaleTimeString()}
Type: ${item.type}

Caption:
${item.caption}

${item.hashtags ? `Hashtags: ${item.hashtags}` : ''}
${item.cta ? `CTA: ${item.cta}` : ''}
---`).join('\n');

            showExportModal(laterFormat);
        }

        function exportToCSV() {
            const csvData = appData.contentQueue.map(item => ({
                'Date': new Date(item.dateTime).toLocaleDateString(),
                'Time': new Date(item.dateTime).toLocaleTimeString(),
                'Type': item.type,
                'Platforms': item.platforms.join(', '),
                'Caption': item.caption,
                'Hashtags': item.hashtags || '',
                'CTA': item.cta || '',
                'Status': 'Scheduled'
            }));

            const csv = convertToCSV(csvData);
            downloadCSV(csv, 'content-calendar.csv');
            appData.showSaveIndicator('📁 CSV file downloaded!');
        }

        function exportToNotion() {
            const today = new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            const businessProgress = calculateCategoryProgress('business');
            const healthProgress = calculateCategoryProgress('health');
            const spanishProgress = calculateCategoryProgress('spanish');
            const socialProgress = calculateCategoryProgress('social');
            
            const totalTasks = document.querySelectorAll('.checkbox-item.completed').length;
            const currentDay = getCurrentDayNumber();
            const currentEra = getCurrentEra();
            
            const exportText = `# 🚀 90-Day Launch Progress Report
**Date:** ${today}
**Day:** ${currentDay} of 90 (${currentEra.name} Era)

## 📊 Daily Progress
- **🏢 Business:** ${businessProgress}%
- **💪 Health:** ${healthProgress}%
- **🇪🇸 Spanish:** ${spanishProgress}%
- **📱 Social:** ${socialProgress}%

## 📈 Key Metrics
- **Total Tasks Completed:** ${totalTasks}
- **Current Era:** ${currentEra.name} Era
- **Days Remaining:** ${Math.max(0, 90 - currentDay + 1)}
- **Content Scheduled:** ${appData.contentQueue.length} posts
- **Google Calendar:** ${googleCalendar.isSignedIn ? '✅ Connected' : '❌ Not Connected'}

## ✅ Completed Tasks Today
${getCompletedTasksList()}

## 📅 Upcoming Content Schedule
${getUpcomingContentList()}

## 🔄 Integration Status
- **Google Calendar Sync:** ${googleCalendar.isSignedIn ? 'Active' : 'Setup Required'}
- **Last Sync:** ${googleCalendar.lastSyncTime ? googleCalendar.lastSyncTime.toLocaleString() : 'Never'}
- **Planoly Export:** Ready
- **Buffer Integration:** Ready

## 🎯 Next Actions
- Continue daily routine
- Focus on ${currentEra.name.toLowerCase()} era priorities
- Maintain consistent progress
${!googleCalendar.isSignedIn ? '- Set up Google Calendar integration for bidirectional sync' : ''}

---
*Generated by 90-Day Launch Dashboard + Content Scheduler*`;

            showExportModal(exportText);
        }

        function getCompletedTasksList() {
            const completedTasks = [];
            ['business', 'health', 'spanish', 'social'].forEach(category => {
                const categorySection = document.getElementById(category);
                if (categorySection) {
                    const completed = categorySection.querySelectorAll('.checkbox-item.completed');
                    completed.forEach(task => {
                        const taskText = task.textContent.trim();
                        completedTasks.push(`- **${category.charAt(0).toUpperCase() + category.slice(1)}:** ${taskText}`);
                    });
                }
            });
            return completedTasks.length > 0 ? completedTasks.join('\n') : '- No tasks completed yet today';
        }

        function getUpcomingContentList() {
            const upcoming = appData.contentQueue
                .filter(item => new Date(item.dateTime) > new Date())
                .sort((a, b) => new Date(a.dateTime) - new Date(b.dateTime))
                .slice(0, 5)
                .map(item => `- **${new Date(item.dateTime).toLocaleDateString()}:** ${item.type} on ${item.platforms.join(', ')}`);
            
            return upcoming.length > 0 ? upcoming.join('\n') : '- No upcoming content scheduled';
        }

        function exportData() {
            const allData = appData.getAllData();
            const dataStr = JSON.stringify(allData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `launch-dashboard-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            appData.showSaveIndicator('💾 Backup downloaded!');
        }

        function updateProgressSummary() {
            const businessProgress = calculateCategoryProgress('business');
            const healthProgress = calculateCategoryProgress('health');
            const spanishProgress = calculateCategoryProgress('spanish');
            const socialProgress = calculateCategoryProgress('social');
            const totalTasks = document.querySelectorAll('.checkbox-item.completed').length;
            const currentDay = getCurrentDayNumber();
            
            const summary = document.getElementById('progressSummary');
            if (summary) {
                summary.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 15px;">
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #4f46e5;">${businessProgress}%</div>
                            <div style="font-size: 0.8rem; color: #64748b;">Business</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #4f46e5;">${healthProgress}%</div>
                            <div style="font-size: 0.8rem; color: #64748b;">Health</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #4f46e5;">${spanishProgress}%</div>
                            <div style="font-size: 0.8rem; color: #64748b;">Spanish</div>
                        </div>
                        <div style="text-align: center; padding: 10px; background: white; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #4f46e5;">${socialProgress}%</div>
                            <div style="font-size: 0.8rem; color: #64748b;">Social</div>
                        </div>
                    </div>
                    <div style="text-align: center; color: #64748b;">
                        <strong>Day ${currentDay} of 90</strong> • <strong>${totalTasks} tasks completed</strong> • <strong>${appData.contentQueue.length} posts scheduled</strong>
                    </div>
                `;
            }
        }

        // Helper Functions
        function convertToCSV(data) {
            if (data.length === 0) return '';
            
            const headers = Object.keys(data[0]);
            const rows = data.map(row => 
                headers.map(header => `"${(row[header] || '').toString().replace(/"/g, '""')}"`).join(',')
            );
            
            return [headers.join(','), ...rows].join('\n');
        }

        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.click();
            window.URL.revokeObjectURL(url);
        }

        function showExportModal(content) {
            const modal = document.getElementById('exportModal');
            const exportTextArea = document.getElementById('exportText');
            
            if (modal && exportTextArea) {
                exportTextArea.value = content;
                modal.style.display = 'block';
            }
        }

        function copyExportText() {
            const exportTextArea = document.getElementById('exportText');
            if (exportTextArea) {
                exportTextArea.select();
                document.execCommand('copy');
                appData.showSaveIndicator('📋 Copied to clipboard!');
            }
        }

        function closeExportModal() {
            const modal = document.getElementById('exportModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Statistics
        function updateStats() {
            let totalTasks = 0;
            
            document.querySelectorAll('.checkbox-item.completed').forEach(() => {
                totalTasks++;
            });
            
            const totalTasksElement = document.getElementById('totalTasks');
            if (totalTasksElement) {
                totalTasksElement.textContent = totalTasks;
            }
            
            const startDate = new Date('2025-08-25');
            const currentDate = new Date();
            const daysPassed = Math.max(0, Math.floor((currentDate - startDate) / (1000 * 60 * 60 * 24)));
            const currentDay = Math.min(90, daysPassed + 1);
            
            const currentDayElement = document.getElementById('currentDay');
            if (currentDayElement) {
                currentDayElement.textContent = currentDay;
            }
            
            const daysLeft = Math.max(0, 90 - daysPassed);
            const daysLeftElement = document.getElementById('daysLeft');
            if (daysLeftElement) {
                daysLeftElement.textContent = daysLeft;
            }
        }

        // Load saved data and initialize
        function loadSavedData() {
            ['business', 'health', 'spanish', 'social'].forEach(category => {
                const categorySection = document.getElementById(category);
                if (categorySection) {
                    categorySection.querySelectorAll('.checkbox-item').forEach(element => {
                        const taskText = element.textContent.trim();
                        const taskId = `${category}-${taskText.replace(/\s+/g, '-').toLowerCase()}`;
                        const isCompleted = appData.load(taskId) === true;
                        
                        const checkbox = element.querySelector('input[type="checkbox"]');
                        if (checkbox) {
                            checkbox.checked = isCompleted;
                            if (isCompleted) {
                                element.classList.add('completed');
                            }
                        }
                    });
                }
            });
            
            updateAllProgressCircles();
            updateEraProgress();
            updateStats();
            updateStreakCounter();
            updateContentQueue();
        }

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Initializing 90-Day Launch Dashboard...');
            
            generateCalendar();
            loadSavedData();
            
            // Initialize Google Calendar integration
            setTimeout(() => {
                googleCalendar.initialize().catch(error => {
                    console.warn('Google Calendar initialization failed:', error);
                    googleCalendar.updateSyncStatus('❌ Google Calendar setup failed - check internet connection', 'error');
                });
            }, 1000); // Wait 1 second for Google API to load
            
            // Set default datetime to current time + 1 hour
            const now = new Date();
            now.setHours(now.getHours() + 1);
            const defaultDateTime = now.toISOString().slice(0, 16);
            const dateTimeInput = document.getElementById('scheduleDateTime');
            if (dateTimeInput) {
                dateTimeInput.value = defaultDateTime;
            }

            console.log('✅ 90-Day Launch Dashboard loaded successfully!');
        });

        // Event Listeners for UI
        document.addEventListener('click', function(event) {
            const modals = ['dayModal', 'exportModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal && event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const openModal = document.querySelector('.modal[style*="block"]');
                if (openModal) {
                    openModal.style.display = 'none';
                }
            }
            
            if ((event.ctrlKey || event.metaKey) && event.key === 's') {
                event.preventDefault();
                ['business', 'health', 'spanish', 'social'].forEach(category => {
                    saveProgress(category);
                });
                appData.showSaveIndicator();
            }
        });

        console.log('🔧 Dashboard ready! All features functional.');
    </script>
</body>
</html>
